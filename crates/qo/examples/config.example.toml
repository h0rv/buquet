# qo Configuration File
# =====================
# Copy this file to .qo.toml (project-level) or ~/.config/qo/config.toml (user-level)
#
# Config resolution order (highest to lowest priority):
#   1. CLI flags (--bucket, --endpoint, etc.)
#   2. Environment variables (S3_BUCKET, S3_ENDPOINT, S3_REGION, QO_*)
#   3. Profile-specific settings (when using --profile)
#   4. Project-level .qo.toml
#   5. User-level ~/.config/qo/config.toml
#   6. Built-in defaults

# =============================================================================
# Default Settings
# =============================================================================
# These apply when no --profile is specified

[default]
# S3 bucket name (required - no default)
bucket = "my-qo-bucket"

# AWS region
region = "us-east-1"

# Custom S3 endpoint (optional - for local dev with LocalStack/MinIO)
# endpoint = "http://localhost:4566"

# =============================================================================
# Profiles
# =============================================================================
# Use with: qo --profile=dev list
# Profile settings override [default] section

[profiles.dev]
bucket = "qo-dev"
endpoint = "http://localhost:4566"
region = "us-east-1"

[profiles.staging]
bucket = "qo-staging"
region = "us-west-2"

[profiles.prod]
bucket = "qo-prod"
region = "us-east-1"

# =============================================================================
# Worker Settings
# =============================================================================
# Configure worker behavior

[worker]
# How often to poll for new tasks (milliseconds)
poll_interval_ms = 1000

# Index mode for task discovery:
#   - "hybrid" (default): Try index first, fall back to log scan
#   - "index": Only use ready index (fastest, requires index integrity)
#   - "scan": Only use log scan (slowest, always correct)
index_mode = "hybrid"

# Which shards this worker should process
# Default: all shards (0-9, a-f)
# Useful for spreading load across multiple workers
# shards = ["0", "1", "2", "3"]

# =============================================================================
# Monitor Settings
# =============================================================================
# Configure the background monitor (timeout checker and index sweeper)

[monitor]
# How often to check for timed-out tasks (seconds)
check_interval_secs = 30

# How often to sweep and repair indexes (seconds)
# Set to 0 to disable sweeping
sweep_interval_secs = 300
